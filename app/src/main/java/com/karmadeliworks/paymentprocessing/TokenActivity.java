package com.karmadeliworks.paymentprocessing;import android.content.Intent;import android.support.v7.app.AppCompatActivity;import android.os.Bundle;import android.view.View;import android.widget.Button;import android.widget.ProgressBar;import android.widget.Toast;import com.stripe.android.Stripe;import com.stripe.android.TokenCallback;import com.stripe.android.model.Card;import com.stripe.android.model.Token;import com.stripe.android.view.CardInputWidget;public class TokenActivity extends AppCompatActivity {    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_token);        final Bundle extras = getIntent().getExtras();        final CardInputWidget cardInputWidget = findViewById(R.id.card_input_widget);        Button btn = findViewById(R.id.validateCard);        final ProgressBar spinner = findViewById(R.id.progressBar1);        spinner.setVisibility(View.GONE);        final String stripeLiveKey = "YOUR_LIVE_KEY_HERE";        final String stripeTestKey =  "YOUR_TEST_KEY_HERE";        btn.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View v) {                spinner.setVisibility(View.VISIBLE);                Card card = cardInputWidget.getCard();                if (card == null){                    spinner.setVisibility(View.GONE);                    Toast toast = Toast.makeText(getApplicationContext(), "You forgot to enter " +                                    "your card number",                            Toast.LENGTH_LONG);                    toast.show();                }else{                    Stripe stripe = new Stripe(getApplicationContext(),stripeTestKey);                    stripe.createToken(card, new TokenCallback() {                        @Override                        public void onError(Exception error) {                            System.out.println(error.getLocalizedMessage());                            spinner.setVisibility(View.GONE);                        }                        @Override                        public void onSuccess(Token token) {                            spinner.setVisibility(View.GONE);                            Intent intent = new Intent(getApplicationContext(), PayActivity.class);                            //grab the token from the function argument                            intent.putExtra("token", token.getId());                            intent.putExtra("donationInfo",extras);                            startActivity(intent);                        }                    });                }            }        });    }}